<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Feud</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="logo">
        <span class="g1">G</span><span class="o1">o</span><span class="o2">o</span><span class="g2">g</span><span class="l">l</span><span class="e">e</span>
        <span class="space"></span>
        <span class="feud-container">
            <span class="f">F</span><span class="e2">e</span><span class="u">u</span><span class="d">d</span>
            <span class="subscript">RunChatCapture.com</span>
        </span>
    </div>
    
    <div class="top-bar">
        <div class="subtitle">How does Google <strong>autocomplete</strong> this search?</div>
        <div class="category-selector">
            <select id="categorySelect">
                <option value="">Select a Category</option>
            </select>
        </div>
    </div>

    <div class="game-container" id="gameArea" style="display: none;">
        <div class="search-container">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <span class="search-prompt" id="searchPrompt"></span>
                <input type="text" class="search-input" id="searchInput" placeholder="" />
                <div id="automationTimer" class="automation-timer" style="display: none;">
                    <span id="timerText">0:00</span>
                </div>
            </div>
        </div>

        <div class="message-container" id="messageContainer">
        </div>

        <div class="suggestions-container" id="suggestionsList">
        </div>

        <div class="buttons-container-bottom">
            <!-- <button class="btn" onclick="newGame()">Guess</button> -->
            <button class="btn" onclick="giveUp()">Give Up</button>
            <button class="btn" id="nextGameBtn" type="button">Next</button>
            <button class="btn" id="chooseGameBtn" type="button">Choose</button>
            <button class="btn" id="clearImprovBtn" type="button" style="display: none;">Clear</button>
            <div class="game-mode-toggle-container">
                <span class="toggle-label">Preset</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="gameModeToggle">
                    <span class="toggle-slider"></span>
                </label>
                <span class="toggle-label">Improv</span>
            </div>
            <div class="automate-button-container">
                <input type="checkbox" id="automateCheckbox" class="automate-checkbox">
                <label for="automateCheckbox" class="automate-label">Auto</label>
                <!-- Floating automation menu -->
                <div id="automationMenu" class="automation-menu" style="display: none;">
                    <div class="automation-menu-content">
                        <div class="automation-menu-title">Go to next round when:</div>
                        <div class="automation-condition">
                            <span>All answers found or</span>
                            <select id="automationTimeout" class="automation-timeout-select">
                                <option value="60">1 minute</option>
                                <option value="30">30 seconds</option>
                            </select>
                        </div>
                        <button id="startAutomationBtn" class="start-automation-btn">Start</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Needs to accommodate simulated and real comments -->
    <div class="comments" id="comments"></div>

    <div class="settings-icon" id="settingsIcon">
        <span>‚öôÔ∏è</span>
    </div>

    <div id="sidepanel" class="sidepanel">
        <div class="sidepanel-header">
            <span class="sidepanel-title">Settings</span>
            <span class="sidepanel-close" id="sidepanelClose">&times;</span>
        </div>
        <div class="accordion">
            <div class="accordion-item">
                <div class="accordion-header">
                    Profile Settings
                    <span class="accordion-icon">‚ñ≤</span>
                </div>
                <div class="accordion-content">
                    <div class="profile-upload-section">
                        <label class="profile-label">Profile Photo</label>
                        <div class="profile-image-container">
                            <img id="profileImage" src="https://img.freepik.com/free-vector/blue-circle-with-white-user_78370-4707.jpg" alt="Profile Picture">
                        </div>
                        <label for="imageUpload" class="change-photo-btn">Change Photo</label>
                        <input type="file" id="imageUpload" accept=".jpg,.jpeg,.png" style="display: none;">
                        <div class="profile-note">PNG or JPG only</div>
                        <label class="profile-label">Username</label>
                        <input type="text" id="profileUsername" class="profile-username-input" maxlength="20" placeholder="Add TikTok Username" autocomplete="off" />
                        <div class="profile-username-error" id="profileUsernameError"></div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="accordion-header">Game Settings <span class="accordion-icon">‚ñ≤</span></div>
                <div class="accordion-content">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <label class="game-settings-label" style="font-weight: bold;">Escape Character</label>
                        <input type="text" id="escapeCharacterInput" class="escape-character-input" maxlength="1" placeholder="Optional" value="." autocomplete="off" />
                    </div>
                    <div class="game-mode-description" style="margin-bottom: 16px;">
                        Character to remove from the beginning of guesses (e.g., "!") to avoid word blocks.
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label class="game-settings-label" style="font-weight: bold;">Automation Flow</label>
                        <button id="automationFlowConfigureBtn" class="btn" type="button">Configure</button>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px; margin-top: 12px; flex-direction: column; align-items: flex-start;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <label class="game-settings-label" style="font-weight: bold;">Game History</label>
                            <span id="gameHistoryPercent" style="font-size: 0.98rem; color: #fff;"></span>
                        </div>
                        <button id="gameHistoryManageBtn" class="btn" type="button" style="margin-top: 6px;">Manage History</button>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="accordion-header">Simulate Activity <span class="accordion-icon">‚ñ≤</span></div>
                <div class="accordion-content">
                    <label class="simulate-toggle-label">
                        <input type="checkbox" id="simulateCommentsToggle" /> Simulate Comments
                    </label>
                </div>
            </div>
            <div class="accordion-item">
                <div class="accordion-header">Leaderboard Settings <span class="accordion-icon">‚ñ≤</span></div>
                <div class="accordion-content">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <label class="game-settings-label" style="font-weight: bold;">Round Winner Modal Duration (seconds)</label>
                        <input type="number" id="modalDurationInput" class="escape-character-input" min="0.5" max="10" step="0.5" value="1.5" autocomplete="off" />
                    </div>
                    <div class="game-mode-description" style="margin-bottom: 16px;">
                        How long the Round Winner modal stays visible after completing a round.
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label class="game-settings-label" style="font-weight: bold;">Leaderboard Management</label>
                        <button id="clearLeaderboardBtn" class="btn" type="button">Clear Leaderboard</button>
                    </div>
                    <div class="game-mode-description">
                        Clear all accumulated points and reset the leaderboard across all rounds.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="accordion-header">Answers <span class="accordion-icon">‚ñ≤</span></div>
                <div class="accordion-content">
                    <div id="answersContent" class="answers-content">
                        Not currently playing
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Round Winners Modal -->
    <div id="roundWinnersModal" class="round-winners-modal" style="display: none;">
        <div class="round-winners-modal-content">
            <div class="round-winners-modal-header">
                <span class="round-winners-modal-title">üèÜ Round Winners</span>
            </div>
            <div class="round-winners-modal-body" id="roundWinnersModalBody">
                <!-- Winners will be populated here -->
            </div>
            <div class="round-winners-modal-footer">
                <span class="round-winners-branding">RunChatCapture.com</span>
            </div>
        </div>
    </div>

    <!-- Automation Flow Modal -->
    <div id="automationFlowModal" class="automation-flow-modal" style="display: none;">
        <div class="automation-flow-modal-content">
            <div class="automation-flow-modal-header">
                <span class="automation-flow-modal-title">Configure Automation Flow</span>
                <span class="automation-flow-modal-close" id="automationFlowModalClose">&times;</span>
            </div>
            <div class="automation-flow-modal-description">
                Configure which categories and prompts are included in automated gameplay.
            </div>
            <div class="automation-flow-modal-body" id="automationFlowModalBody">
                <!-- Category and prompt checkboxes will be rendered here by JS -->
            </div>
            <div class="automation-flow-modal-footer">
                <button id="automationFlowModalSave" class="btn" type="button">Save</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Test Form for handleRealComment -->
    <div id="testForm" class="test-form">
        <div class="test-form-header">
            <span>Test Real Comment</span>
            <button id="toggleTestForm" class="test-form-toggle">‚àí</button>
        </div>
        <div class="test-form-body" id="testFormBody">
            <div class="test-form-row">
                <label>Username:</label>
                <input type="text" id="testUsername" value="TestUser" />
            </div>
            <div class="test-form-row">
                <label>Unique ID:</label>
                <input type="text" id="testUniqueId" value="test123" />
            </div>
            <div class="test-form-row">
                <label>Photo URL:</label>
                <input type="text" id="testPhotoUrl" value="https://picsum.photos/40" />
            </div>
            <div class="test-form-row">
                <label>Comment:</label>
                <input type="text" id="testComment" placeholder="Enter guess here" />
            </div>
            <button id="submitTestComment" class="test-form-submit">Send Comment</button>
        </div>
    </div>

    <!-- Floating Leaderboard -->
    <div id="floatingLeaderboard" class="floating-leaderboard">
        <div class="floating-leaderboard-header" id="leaderboardHeader">
            <span>üèÜ Leaderboard</span>
            <div class="leaderboard-controls">
                <button id="prevLeaderboardPage" class="leaderboard-nav-btn">‚Äπ</button>
                <span id="leaderboardPageInfo" class="leaderboard-page-info">1/1</span>
                <button id="nextLeaderboardPage" class="leaderboard-nav-btn">‚Ä∫</button>
                <button id="toggleFloatingLeaderboard" class="floating-leaderboard-toggle">‚àí</button>
            </div>
        </div>
        <div class="floating-leaderboard-body" id="floatingLeaderboardBody">
            <div class="leaderboard-list" id="leaderboardList">
                <div class="leaderboard-empty">No players yet</div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>