<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Scaffold Example</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Game Scaffold Test</h1>

  <!-- Lifecycle Test Buttons -->
  <button onclick="GameManager.initGame()">Init Game</button>
  <button onclick="GameManager.startRound()">Start Round</button>
  <button onclick="GameManager.endRound('win', [{name:'Alice', photo:'https://picsum.photos/seed/alice/100'}], 'APPLE')">End Round (Win)</button>
  <button onclick="GameManager.endRound('win', [
      {name:'Alice', photo:'https://picsum.photos/seed/alice/100'},
      {name:'Bob', photo:'https://picsum.photos/seed/bob/100'}
      ], 'APPLE')">End Round (Win Multiple)</button>
  <button onclick="GameManager.endRound('loss', [], 'BANANA')">End Round (Loss)</button>
  <button onclick="GameManager.nextGame()">Next Game</button>
  <button onclick="GameManager.showInstructionPopup(
      'This is how you play the game!',
      'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif',
      4
      )">Show Instructions</button>

  <!-- UI Components -->
  <div id="message" class="message"></div>

  <!-- Winning Modal -->
  <div id="winning-overlay" class="winning-overlay">
    <div id="winning-modal" class="winning-modal">
      <div id="winning-title" class="winning-title">Congratulations!</div>
      <div id="winning-word" class="winning-word"></div>

      <!-- Single Winner -->
      <div id="single-winner" class="single-winner">
        <img id="winner-photo" class="winner-photo" src="" alt="Winner">
        <div id="winner-name" class="winner-name"></div>
      </div>

      <!-- Multiple Winners -->
      <div id="multiple-winners" class="multiple-winners"></div>
    </div>
  </div>

  <!-- Instruction Popup -->
  <div id="instruction-popup" class="instruction-popup">
    <div id="instruction-popup-content" class="instruction-popup-content">
      <div id="instruction-popup-text-display" class="instruction-popup-text"></div>
      <img id="instruction-popup-gif-display" class="instruction-popup-gif" src="" alt="" style="display:none;">
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settings-panel" class="settings-panel">
    <div class="settings-header">
      <h2>Settings</h2>
      <button id="close-settings" class="close-btn">×</button>
    </div>

    <div class="settings-section">
      <div class="settings-section-header">
        <h3>Game Settings</h3>
        <span class="arrow">▼</span>
      </div>
      <div class="settings-section-content">
        <div class="setting-item">
          <label>➤ Current Answer:</label>
          <div id="current-answer-display" style="font-weight: bold; color: #4CAF50; font-size: 18px; letter-spacing: 2px; text-transform: uppercase;">Loading...</div>
        </div>
        <div class="setting-item">
          <label for="language-select">Language:</label>
          <select id="language-select" class="setting-select">
            <option value="en" selected>English</option>
            <option value="es">Español</option>
          </select>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <div class="settings-section-header">
        <h3>Simulate Activity</h3>
        <span class="arrow">▼</span>
      </div>
      <div class="settings-section-content">
        <div class="setting-item">
          <label for="simulate-guesses">Simulate Audience Guesses:</label>
          <input type="checkbox" id="simulate-guesses" class="setting-checkbox">
        </div>
      </div>
    </div>

    <div class="settings-section">
      <div class="settings-section-header">
        <h3>Winning Popup Settings</h3>
        <span class="arrow">▼</span>
      </div>
      <div class="settings-section-content">
        <div class="setting-item">
          <label for="winning-sound-url">Winning Sound URL:</label>
          <input type="url" id="winning-sound-url" class="setting-input-wide" placeholder="https://example.com/sound.mp3" value="https://www.myinstants.com/media/sounds/applepay.mp3">
        </div>
        <div class="setting-item">
          <label for="winning-modal-duration">Modal Duration (seconds):</label>
          <div class="number-input-container">
            <button class="number-input-btn" id="decrease-duration">-</button>
            <input type="number" id="winning-modal-duration" class="setting-input" value="2" min="1" max="5">
            <button class="number-input-btn" id="increase-duration">+</button>
          </div>
        </div>
        <div class="setting-item">
          <button id="test-winning-sound" class="test-btn">Test Sound</button>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <div class="settings-section-header">
        <h3>Instruction Popup Settings</h3>
        <span class="arrow">▼</span>
      </div>
      <div class="settings-section-content">
        <div class="setting-item">
          <label for="instruction-popup-active">Show at Round Start:</label>
          <input type="checkbox" id="instruction-popup-active" class="setting-checkbox">
        </div>
        <div class="setting-item">
          <label for="instruction-popup-duration">Display Duration (seconds):</label>
          <div class="number-input-container">
            <button class="number-input-btn" id="decrease-instruction-duration">-</button>
            <input type="number" id="instruction-popup-duration" class="setting-input" value="3" min="1" max="10">
            <button class="number-input-btn" id="increase-instruction-duration">+</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="instruction-popup-text">Instruction Text:</label>
          <textarea id="instruction-popup-text" class="setting-textarea" rows="3">Guess the word to win!
This is wordle with endless guesses.
There are single player and group modes.</textarea>
        </div>
        <div class="setting-item">
          <label for="instruction-popup-gif">GIF URL (optional):</label>
          <input type="url" id="instruction-popup-gif" class="setting-input-wide" placeholder="https://example.com/instruction.gif" value="https://media0.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif">
        </div>
        <div class="setting-item">
          <button id="test-instruction-popup" class="test-btn">Test Popup</button>
        </div>
      </div>
    </div>

    <div class="settings-section">
      <div class="settings-section-header">
        <h3>Text-to-Speech Settings</h3>
        <span class="arrow">▼</span>
      </div>
      <div class="settings-section-content">
        <div class="setting-item">
          <label for="tts-enabled">Enable Text-to-Speech:</label>
          <input type="checkbox" id="tts-enabled" class="setting-checkbox">
        </div>
        <div class="setting-item">
          <label for="tts-voice">Voice:</label>
          <select id="tts-voice" class="setting-select">
            <option value="">Default Voice</option>
          </select>
        </div>
        <div class="setting-item">
          <label for="tts-volume">Volume:</label>
          <div class="number-input-container">
            <button class="number-input-btn" id="decrease-tts-volume">-</button>
            <input type="number" id="tts-volume" class="setting-input" value="50" min="0" max="100" step="10">
            <button class="number-input-btn" id="increase-tts-volume">+</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="tts-rate">Speech Rate:</label>
          <div class="number-input-container">
            <button class="number-input-btn" id="decrease-tts-rate">-</button>
            <input type="number" id="tts-rate" class="setting-input" value="10" min="5" max="12" step="1">
            <button class="number-input-btn" id="increase-tts-rate">+</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="tts-read-words">Read Every Word Entered:</label>
          <input type="checkbox" id="tts-read-words" class="setting-checkbox">
        </div>
        <div class="setting-item">
          <label for="tts-round-start-enabled">Round Start Announcements:</label>
          <input type="checkbox" id="tts-round-start-enabled" class="setting-checkbox">
        </div>
        <div class="setting-item">
          <label for="tts-round-start-texts">Round Start Messages (separate with ;):</label>
          <textarea id="tts-round-start-texts" class="setting-textarea" rows="3">Welcome to Wordle! Let's begin.; New round starting! Good luck!; Time to guess the word!</textarea>
        </div>
        <div class="setting-item">
          <label for="tts-game-won-enabled">Victory Announcements:</label>
          <input type="checkbox" id="tts-game-won-enabled" class="setting-checkbox">
        </div>
        <div class="setting-item">
          <label for="tts-game-won-texts">Victory Messages (separate with ;):</label>
          <textarea id="tts-game-won-texts" class="setting-textarea" rows="3">Congratulations! You won!; Excellent work! Victory achieved!; Well done! You guessed it!</textarea>
        </div>
        <div class="setting-item">
          <label for="tts-gameplay-enabled">Gameplay Announcements:</label>
          <input type="checkbox" id="tts-gameplay-enabled" class="setting-checkbox">
        </div>
        <div class="setting-item">
          <label for="tts-gameplay-interval">Announcement Interval (seconds):</label>
          <div class="number-input-container">
            <button class="number-input-btn" id="decrease-tts-interval">-</button>
            <input type="number" id="tts-gameplay-interval" class="setting-input" value="30" min="10" max="300" step="10">
            <button class="number-input-btn" id="increase-tts-interval">+</button>
          </div>
        </div>
        <div class="setting-item">
          <label for="tts-gameplay-texts">Gameplay Messages (separate with ;):</label>
          <textarea id="tts-gameplay-texts" class="setting-textarea" rows="3">Keep going! You can do it!; Think carefully about your next guess.; You're doing great!</textarea>
        </div>
        <div class="setting-item">
          <button id="test-tts" class="test-btn">Test TTS</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Toggle Button -->
  <button id="settings-toggle" class="settings-toggle">
    <svg viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
    </svg>
  </button>

  <!-- Floating Leaderboard -->
<div id="floatingLeaderboard" class="floating-leaderboard">
    <div class="floating-leaderboard-header" id="leaderboardHeader">
      <span>🏆 Leaderboard</span>
      <div class="leaderboard-controls">
        <button id="prevLeaderboardPage" class="leaderboard-nav-btn">‹</button>
        <span id="leaderboardPageInfo" class="leaderboard-page-info">1/1</span>
        <button id="nextLeaderboardPage" class="leaderboard-nav-btn">›</button>
        <button id="toggleFloatingLeaderboard" class="floating-leaderboard-toggle">−</button>
      </div>
    </div>
    <div class="floating-leaderboard-body" id="floatingLeaderboardBody">
      <div class="leaderboard-list" id="leaderboardList">
        <div class="leaderboard-empty">No players yet</div>
      </div>
    </div>
  </div>
  

  <!-- Scripts -->
  <script src="storage.js"></script>
  <script src="gameManager.js"></script>
  <script src="settingsPanel.js"></script>
  <script src="tiktokEvents.js"></script>
  <script src="leaderboard.js"></script>
</body>
</html>
